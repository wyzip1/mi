<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./public/css/register.css">
    <link rel="stylesheet" href="./public/css/bootstrap.min.css">
    <link rel="stylesheet" href="./public/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="./public/js/jquery-3.4.1.min.js"></script>
    <script src="./public/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <img src="./public/img/milogo.png" alt="">
        <h3 class="title">注册小米帐号</h3>
        <div class="form">
            <h4 class="font-normal">国家/地区</h4>
            <div class="area">
                <div class="area_name">中国</div>
                <span class="area_select">
                    <i class="dropDown"></i>
                </span>
                <div class="choose_area">
                    <ul></ul>
                </div>
            </div>
            <h4 class="font-normal">成功注册帐号后，国家/地区将不能被修改</h4>
            <h4 class="font-normal">手机号码</h4>
            <div class="phone">
                <span class="area_select">
                    <span id="first">+86</span><i class="fa fa-caret-down" aria-hidden="true"></i>
                    <div class="choose_area">
                        <ul></ul>
                    </div>
                </span>
                <input type="number" class="tel" id="tel">
            </div>
            <button id="reg_btn">立即注册</button>
            <p class="font-normal text-center">已阅读并同意：小米 用户协议和 隐私政策</p>
        </div>
    </div>
    <div class="footer">
        <ul>
            <li><a href="#">简体</a></li>
            <li>|</li>
            <li><a href="#">繁体</a></li>
            <li>|</li>
            <li><a href="#">English</a></li>
            <li>|</li>
            <li><a href="#">常见问题</a></li>
        </ul>
    </div>
    <p class="text-center" style="color: #9d9d9d;">
        小米公司版权所有-京ICP备10046444-京公网<i class="police"></i>安备11010802020134号-京ICP证110507号
    </p>

    <script>
        const area = [{
                name: "中国",
                code: '+86'
            }, {
                name: "美国",
                code: '+33'
            }, {
                name: "日本",
                code: '+75'
            }, {
                name: "英国",
                code: '+26'
            }, {
                name: "阿富汗",
                code: '+91'
            },
            {
                name: "韩国",
                code: '+24'
            },
        ];
        var area_name = "";
        var area_name_code = "";
        var code = '+86';
        for (let i of area) {
            area_name += `<li>${i.name}</li>`;
        }
        for (let i of area) {
            area_name_code += `<li>${i.name} <span> ${i.code}</span></li>`;
        }
        $('.area .choose_area ul').html(area_name);
        $('.phone .choose_area ul').html(area_name_code);
        $('.area').click(function () {
            $('.area .choose_area').toggle();
        });
        $('.area .choose_area li').click(function () {
            let arr = Array.from($('.area .choose_area li'));
            let index = arr.indexOf(this);
            $('.area_name').text(area[index].name);
            $('#first').text(area[index].code);
            code = area[index].code;
        })
        $('.phone .area_select').click(function () {
            $('.phone .choose_area').toggle();
        });
        $('.phone li').click(function () {
            let arr = Array.from($('.phone li'));
            let index = arr.indexOf(this);
            $('.area_name').text(area[index].name);
            $('#first').text(area[index].code);
            code = area[index].code;
        })
        $('#reg_btn').click(function () {
            let phone = $('#tel').val().trim();
            if (!(/^1[3456789]\d{9}$/.test(phone))) {
                alert('手机号格式错误');
            } else {
                location.href = './register_yz.html?phone=' + phone + '&code=' + code;
            }
        });
    </script>
</body>

</html>